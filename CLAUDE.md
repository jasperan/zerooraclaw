# ZeroOraClaw

Oracle AI Database-powered fork of ZeroClaw. Every byte of persistence goes through Oracle.

## Architecture

- **Oracle is the ONLY storage backend** -- no SQLite, no PostgreSQL, no markdown files
- Rust 1.87+ required
- `oracle` crate (v0.6) for the database driver
- ONNX ALL_MINILM_L12_V2 for in-database embeddings (384-dim vectors)
- All database tables use the prefix `ZERO_*` (8 tables total)
- Supports FreePDB (local Docker) and Autonomous Database (cloud)

## Key Directories

```
src/oracle/          # All Oracle integration code
  connection.rs      # OracleConnection manager, pooling, connect/disconnect
  schema.rs          # DDL for 8 ZERO_* tables, ONNX model loading, migrations
  embedding.rs       # VECTOR_EMBEDDING() wrapper, OracleEmbeddingService
  memory.rs          # OracleMemory impl of MemoryProvider trait
  session.rs         # OracleSessionStore — chat history as JSON CLOB
  state.rs           # OracleStateStore — agent key-value pairs
  config_store.rs    # OracleConfigStore — config snapshots as JSON CLOB
  prompt.rs          # OraclePromptStore — system prompts seeded from workspace
  vector.rs          # VECTOR_DISTANCE helpers, cosine similarity search
  mod.rs             # Module re-exports and OracleConfig struct

src/memory/          # Memory trait definitions (MemoryProvider, MemoryEntry)
src/agent/           # Agent runtime loop
src/cli/             # CLI commands including setup-oracle, oracle-inspect
src/config/          # Application configuration
scripts/             # Shell scripts (setup-oracle.sh, bootstrap.sh)
config/              # Example configuration files
```

## Build & Test

```sh
cargo build --release
cargo test
cargo clippy --all-targets
```

## Docker

```sh
# Full stack (Oracle DB + ZeroOraClaw)
docker compose up -d

# Oracle DB only for local dev
docker compose up oracle-db -d

# Setup script (starts DB, creates user, initializes schema)
./scripts/setup-oracle.sh
```

## CLI Commands

```sh
zerooraclaw setup-oracle                    # Initialize schema + ONNX model
zerooraclaw oracle-inspect                  # Dashboard: table counts, schema version
zerooraclaw oracle-inspect memories         # List memories
zerooraclaw oracle-inspect memories --search "topic"  # Semantic search
zerooraclaw agent -m "Hello!"               # Chat with the agent
zerooraclaw onboard                         # Configure LLM provider
```

## Oracle Schema (8 tables)

| Table | Purpose |
|---|---|
| ZERO_META | Schema version tracking |
| ZERO_MEMORIES | Long-term memories with VECTOR(384) |
| ZERO_DAILY_NOTES | Daily journal with VECTOR(384) |
| ZERO_SESSIONS | Chat history (JSON CLOB) |
| ZERO_TRANSCRIPTS | Full audit log |
| ZERO_STATE | Agent key-value state |
| ZERO_CONFIG | Config snapshots (JSON CLOB) |
| ZERO_PROMPTS | System prompts |

## Coding Conventions

- Follow existing Rust patterns in the codebase (Result types, error handling)
- All persistence MUST go through `src/oracle/` -- never add file-based or SQLite storage
- Use `oracle` crate connection methods; never raw SQL strings outside `src/oracle/`
- Keep Oracle-specific SQL in the appropriate `src/oracle/*.rs` file
- Environment variables for Oracle config use the `ZEROORACLAW_ORACLE_` prefix

## Git & Workflow

- Do NOT include AI attribution in commit messages (no "Co-Authored-By: Claude", "Generated by Claude", etc.)
- NEVER push to GitHub -- only commit locally. User pushes manually.
- Keep commit messages focused solely on the changes made.
